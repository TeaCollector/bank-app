Index: ms-deal/src/main/java/ru/alex/msdeal/MsDealApplication.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.alex.msdeal;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n\r\n@SpringBootApplication\r\npublic class MsDealApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(MsDealApplication.class, args);\r\n    }\r\n\r\n}\r\n
===================================================================
diff --git a/ms-deal/src/main/java/ru/alex/msdeal/MsDealApplication.java b/ms-deal/src/main/java/ru/alex/msdeal/MsDealApplication.java
--- a/ms-deal/src/main/java/ru/alex/msdeal/MsDealApplication.java	
+++ b/ms-deal/src/main/java/ru/alex/msdeal/MsDealApplication.java	
@@ -2,9 +2,11 @@
 
 import org.springframework.boot.SpringApplication;
 import org.springframework.boot.autoconfigure.SpringBootApplication;
+import org.springframework.cloud.openfeign.EnableFeignClients;
 
 
 @SpringBootApplication
+@EnableFeignClients
 public class MsDealApplication {
 
     public static void main(String[] args) {
Index: ms-deal/pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>2.7.6</version>\r\n        <relativePath/>\r\n    </parent>\r\n    <groupId>ru.alex</groupId>\r\n    <artifactId>ms-deal</artifactId>\r\n    <version>1.0-SNAPSHOT</version>\r\n    <name>ms-deal</name>\r\n    <description>ms-deal</description>\r\n    <properties>\r\n        <postgresql.version>42.7.3</postgresql.version>\r\n        <java.version>17</java.version>\r\n    </properties>\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-data-jpa</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n        </dependency>\r\n\r\n        <dependency>\r\n            <groupId>org.postgresql</groupId>\r\n            <artifactId>postgresql</artifactId>\r\n            <version>${postgresql.version}</version>\r\n            <scope>runtime</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.projectlombok</groupId>\r\n            <artifactId>lombok</artifactId>\r\n            <optional>true</optional>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-test</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n\r\n        <dependency>\r\n            <groupId>org.springdoc</groupId>\r\n            <artifactId>springdoc-openapi-ui</artifactId>\r\n            <version>1.8.0</version>\r\n        </dependency>\r\n    </dependencies>\r\n\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n                <configuration>\r\n                    <excludes>\r\n                        <exclude>\r\n                            <groupId>org.projectlombok</groupId>\r\n                            <artifactId>lombok</artifactId>\r\n                        </exclude>\r\n                    </excludes>\r\n                </configuration>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n\r\n</project>\r\n
===================================================================
diff --git a/ms-deal/pom.xml b/ms-deal/pom.xml
--- a/ms-deal/pom.xml	
+++ b/ms-deal/pom.xml	
@@ -13,19 +13,34 @@
     <version>1.0-SNAPSHOT</version>
     <name>ms-deal</name>
     <description>ms-deal</description>
+
     <properties>
         <postgresql.version>42.7.3</postgresql.version>
         <java.version>17</java.version>
+        <flyway.version>8.5.13</flyway.version>
+        <springdoc.version>1.8.0</springdoc.version>
+        <hibernate-types.version>2.2.2</hibernate-types.version>
+        <mapstruct.version>1.5.5.Final</mapstruct.version>
+        <lombok.version>1.18.24</lombok.version>
+        <openfeign.version>3.1.8</openfeign.version>
     </properties>
+
     <dependencies>
         <dependency>
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-data-jpa</artifactId>
         </dependency>
+
         <dependency>
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-web</artifactId>
         </dependency>
+
+        <dependency>
+            <groupId>org.springframework.cloud</groupId>
+            <artifactId>spring-cloud-starter-openfeign</artifactId>
+            <version>${openfeign.version}</version>
+        </dependency>
 
         <dependency>
             <groupId>org.postgresql</groupId>
@@ -33,11 +48,13 @@
             <version>${postgresql.version}</version>
             <scope>runtime</scope>
         </dependency>
+
         <dependency>
             <groupId>org.projectlombok</groupId>
             <artifactId>lombok</artifactId>
             <optional>true</optional>
         </dependency>
+
         <dependency>
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-test</artifactId>
@@ -47,8 +64,28 @@
         <dependency>
             <groupId>org.springdoc</groupId>
             <artifactId>springdoc-openapi-ui</artifactId>
-            <version>1.8.0</version>
+            <version>${springdoc.version}</version>
+        </dependency>
+
+        <dependency>
+            <groupId>org.flywaydb</groupId>
+            <artifactId>flyway-maven-plugin</artifactId>
+            <version>${flyway.version}</version>
+        </dependency>
+
+        <dependency>
+            <groupId>org.mapstruct</groupId>
+            <artifactId>mapstruct</artifactId>
+            <version>${mapstruct.version}</version>
+        </dependency>
+
+
+        <dependency>
+            <groupId>com.vladmihalcea</groupId>
+            <artifactId>hibernate-types-52</artifactId>
+            <version>${hibernate-types.version}</version>
         </dependency>
+
     </dependencies>
 
     <build>
@@ -65,7 +102,36 @@
                     </excludes>
                 </configuration>
             </plugin>
+            <plugin>
+                <groupId>org.apache.maven.plugins</groupId>
+                <artifactId>maven-compiler-plugin</artifactId>
+                <configuration>
+                    <source>${java.version}</source>
+                    <target>${java.version}</target>
+                    <annotationProcessorPaths>
+                        <path>
+                            <groupId>org.mapstruct</groupId>
+                            <artifactId>mapstruct-processor</artifactId>
+                            <version>${mapstruct.version}</version>
+                        </path>
+                        <path>
+                            <groupId>org.projectlombok</groupId>
+                            <artifactId>lombok</artifactId>
+                            <version>${lombok.version}</version>
+                        </path>
+                        <path>
+                            <groupId>org.projectlombok</groupId>
+                            <artifactId>lombok-mapstruct-binding</artifactId>
+                            <version>0.2.0</version>
+                        </path>
+<!--                        <path>-->
+<!--                            <groupId>org.springframework.boot</groupId>-->
+<!--                            <artifactId>spring-boot-configuration-processor</artifactId>-->
+<!--                            <version>${project.parent.version}</version>-->
+<!--                        </path>-->
+                    </annotationProcessorPaths>
+                </configuration>
+            </plugin>
         </plugins>
     </build>
-
-</project>
+</project>
\ No newline at end of file
Index: ms-deal/src/main/java/ru/alex/msdeal/entity/Credit.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.alex.msdeal.entity;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.util.UUID;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport org.hibernate.annotations.JdbcTypeCode;\r\nimport org.hibernate.type.SqlTypes;\r\nimport ru.alex.msdeal.entity.constant.CreditStatus;\r\n\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name = \"credit\", schema = \"public\")\r\n@Entity(name = \"Credit\")\r\npublic class Credit {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private UUID id;\r\n\r\n    private BigDecimal amount;\r\n\r\n    private Integer term;\r\n\r\n    private BigDecimal MonthlyPayment;\r\n\r\n    private BigDecimal rate;\r\n\r\n    private BigDecimal psk;\r\n\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n\r\n    private PaymentSchedule paymentSchedule;\r\n\r\n    private Boolean insuranceEnable;\r\n\r\n    private Boolean salaryClient;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private CreditStatus creditStatus;\r\n\r\n}\r\n
===================================================================
diff --git a/ms-deal/src/main/java/ru/alex/msdeal/entity/Credit.java b/ms-deal/src/main/java/ru/alex/msdeal/entity/Credit.java
--- a/ms-deal/src/main/java/ru/alex/msdeal/entity/Credit.java	
+++ b/ms-deal/src/main/java/ru/alex/msdeal/entity/Credit.java	
@@ -2,22 +2,20 @@
 
 import java.math.BigDecimal;
 import java.util.UUID;
-import javax.persistence.Entity;
-import javax.persistence.GeneratedValue;
-import javax.persistence.Id;
-import javax.persistence.Table;
-import jakarta.persistence.*;
+import javax.persistence.*;
+import com.vladmihalcea.hibernate.type.json.JsonBinaryType;
 import lombok.AllArgsConstructor;
 import lombok.Getter;
 import lombok.NoArgsConstructor;
 import lombok.Setter;
-import org.hibernate.annotations.JdbcTypeCode;
-import org.hibernate.type.SqlTypes;
+import org.hibernate.annotations.Type;
+import org.hibernate.annotations.TypeDef;
 import ru.alex.msdeal.entity.constant.CreditStatus;
 
 
 @Getter
 @Setter
+@TypeDef(name = "jsonb", typeClass = JsonBinaryType.class)
 @NoArgsConstructor
 @AllArgsConstructor
 @Table(name = "credit", schema = "public")
@@ -38,8 +36,7 @@
 
     private BigDecimal psk;
 
-    @JdbcTypeCode(SqlTypes.JSON)
-
+    @Type(type = "jsonb")
     private PaymentSchedule paymentSchedule;
 
     private Boolean insuranceEnable;
Index: ms-deal/src/main/java/ru/alex/msdeal/entity/Client.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.alex.msdeal.entity;\r\n\r\nimport java.util.Date;\r\nimport java.util.UUID;\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport org.hibernate.annotations.JdbcTypeCode;\r\nimport org.hibernate.type.SqlTypes;\r\nimport ru.alex.msdeal.entity.constant.Gender;\r\nimport ru.alex.msdeal.entity.constant.MaritalStatus;\r\n\r\n\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity(name = \"Client\")\r\n@Table(name = \"client\", schema = \"public\")\r\npublic class Client {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = \"client_id\")\r\n    private UUID id;\r\n\r\n    private String lastName;\r\n\r\n    private String firstName;\r\n\r\n    private String middleName;\r\n\r\n    private Date birthDate;\r\n\r\n    private String email;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Gender gender;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private MaritalStatus maritalStatus;\r\n\r\n    private Integer dependentAmount;\r\n\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = \"passport_id\")\r\n    private Passport passport;\r\n\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n    @OneToOne\r\n    @JoinColumn(name = \"employment_id\")\r\n    private Employment employment;\r\n    private String accountNumber;\r\n\r\n}\r\n
===================================================================
diff --git a/ms-deal/src/main/java/ru/alex/msdeal/entity/Client.java b/ms-deal/src/main/java/ru/alex/msdeal/entity/Client.java
--- a/ms-deal/src/main/java/ru/alex/msdeal/entity/Client.java	
+++ b/ms-deal/src/main/java/ru/alex/msdeal/entity/Client.java	
@@ -2,19 +2,21 @@
 
 import java.util.Date;
 import java.util.UUID;
-import jakarta.persistence.*;
+import javax.persistence.*;
+import com.vladmihalcea.hibernate.type.json.JsonBinaryType;
 import lombok.AllArgsConstructor;
 import lombok.Getter;
 import lombok.NoArgsConstructor;
 import lombok.Setter;
-import org.hibernate.annotations.JdbcTypeCode;
-import org.hibernate.type.SqlTypes;
+import org.hibernate.annotations.Type;
+import org.hibernate.annotations.TypeDef;
 import ru.alex.msdeal.entity.constant.Gender;
 import ru.alex.msdeal.entity.constant.MaritalStatus;
 
 
 @Getter
 @Setter
+@TypeDef(name = "jsonb", typeClass = JsonBinaryType.class)
 @AllArgsConstructor
 @NoArgsConstructor
 @Entity(name = "Client")
@@ -44,15 +46,14 @@
 
     private Integer dependentAmount;
 
-    @JdbcTypeCode(SqlTypes.JSON)
-    @OneToOne(fetch = FetchType.LAZY)
+    @Type(type = "jsonb")
     @JoinColumn(name = "passport_id")
     private Passport passport;
 
-    @JdbcTypeCode(SqlTypes.JSON)
-    @OneToOne
+    @Type(type = "jsonb")
     @JoinColumn(name = "employment_id")
     private Employment employment;
+
     private String accountNumber;
 
 }
Index: ms-deal/src/main/java/ru/alex/msdeal/entity/StatusHistory.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.alex.msdeal.entity;\r\n\r\nimport java.time.Instant;\r\nimport jakarta.persistence.EnumType;\r\nimport jakarta.persistence.Enumerated;\r\nimport ru.alex.msdeal.entity.constant.ChangeType;\r\n\r\n\r\npublic class StatusHistory {\r\n\r\n    private String status;\r\n    private Instant time;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private ChangeType changeType;\r\n}\r\n
===================================================================
diff --git a/ms-deal/src/main/java/ru/alex/msdeal/entity/StatusHistory.java b/ms-deal/src/main/java/ru/alex/msdeal/entity/StatusHistory.java
--- a/ms-deal/src/main/java/ru/alex/msdeal/entity/StatusHistory.java	
+++ b/ms-deal/src/main/java/ru/alex/msdeal/entity/StatusHistory.java	
@@ -1,8 +1,8 @@
 package ru.alex.msdeal.entity;
 
 import java.time.Instant;
-import jakarta.persistence.EnumType;
-import jakarta.persistence.Enumerated;
+import javax.persistence.EnumType;
+import javax.persistence.Enumerated;
 import ru.alex.msdeal.entity.constant.ChangeType;
 
 
Index: ms-deal/src/main/resources/application.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>spring.application.name=ms-deal\r\n\r\nspring.server=8082\r\n\r\nspring.datasource.url = jdbc:postgresql://localhost:5454/bank-app\r\nspring.datasource.username = admin\r\nspring.datasource.password = admin\r\nspring.datasource.driverClassName = org.postgresql.Driver\r\n\r\nspring.jpa.hibernate.ddl-auto = validate\r\nspring.jpa.properties.hibernate.show_sql   = true\r\nspring.jpa.properties.hibernate.format_sql = true
===================================================================
diff --git a/ms-deal/src/main/resources/application.properties b/ms-deal/src/main/resources/application.properties
--- a/ms-deal/src/main/resources/application.properties	
+++ b/ms-deal/src/main/resources/application.properties	
@@ -1,12 +1,14 @@
 spring.application.name=ms-deal
 
-spring.server=8082
+server.port=8082
 
 spring.datasource.url = jdbc:postgresql://localhost:5454/bank-app
 spring.datasource.username = admin
 spring.datasource.password = admin
 spring.datasource.driverClassName = org.postgresql.Driver
 
-spring.jpa.hibernate.ddl-auto = validate
+spring.jpa.hibernate.ddl-auto = none
 spring.jpa.properties.hibernate.show_sql   = true
-spring.jpa.properties.hibernate.format_sql = true
\ No newline at end of file
+spring.jpa.properties.hibernate.format_sql = true
+
+spring.flyway.enabled=true
\ No newline at end of file
Index: ms-deal/src/main/java/ru/alex/msdeal/entity/Statement.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.alex.msdeal.entity;\r\n\r\nimport java.time.Instant;\r\nimport java.util.UUID;\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport org.hibernate.annotations.JdbcTypeCode;\r\nimport org.hibernate.type.SqlTypes;\r\nimport ru.alex.msdeal.entity.constant.ApplicationStatus;\r\n\r\n\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Table(name = \"statement\", schema = \"public\")\r\n@Entity\r\npublic class Statement {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = \"statement_id\")\r\n    private UUID id;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = \"client_id\")\r\n    private Client client;\r\n\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = \"client_id\")\r\n    private Credit credit;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private ApplicationStatus status;\r\n\r\n    private Instant creationDate;\r\n\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n    private AppliedOffer aplliedOffer;\r\n\r\n    private Instant signDate;\r\n\r\n    private Integer sesCode;\r\n\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n    private StatusHistory statusHistory;\r\n\r\n\r\n}\r\n
===================================================================
diff --git a/ms-deal/src/main/java/ru/alex/msdeal/entity/Statement.java b/ms-deal/src/main/java/ru/alex/msdeal/entity/Statement.java
--- a/ms-deal/src/main/java/ru/alex/msdeal/entity/Statement.java	
+++ b/ms-deal/src/main/java/ru/alex/msdeal/entity/Statement.java	
@@ -2,18 +2,20 @@
 
 import java.time.Instant;
 import java.util.UUID;
-import jakarta.persistence.*;
+import javax.persistence.*;
+import com.vladmihalcea.hibernate.type.json.JsonBinaryType;
 import lombok.AllArgsConstructor;
 import lombok.Getter;
 import lombok.NoArgsConstructor;
 import lombok.Setter;
-import org.hibernate.annotations.JdbcTypeCode;
-import org.hibernate.type.SqlTypes;
+import org.hibernate.annotations.Type;
+import org.hibernate.annotations.TypeDef;
 import ru.alex.msdeal.entity.constant.ApplicationStatus;
 
 
 @Getter
 @Setter
+@TypeDef(name = "jsonb", typeClass = JsonBinaryType.class)
 @AllArgsConstructor
 @NoArgsConstructor
 @Table(name = "statement", schema = "public")
@@ -31,7 +33,7 @@
 
 
     @OneToOne(fetch = FetchType.LAZY)
-    @JoinColumn(name = "client_id")
+    @JoinColumn(name = "credit_id")
     private Credit credit;
 
     @Enumerated(EnumType.STRING)
@@ -39,14 +41,14 @@
 
     private Instant creationDate;
 
-    @JdbcTypeCode(SqlTypes.JSON)
+    @Type(type = "jsonb")
     private AppliedOffer aplliedOffer;
 
     private Instant signDate;
 
     private Integer sesCode;
 
-    @JdbcTypeCode(SqlTypes.JSON)
+    @Type(type = "jsonb")
     private StatusHistory statusHistory;
 
 
Index: ms-deal/src/main/java/ru/alex/msdeal/entity/Employment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.alex.msdeal.entity;\r\n\r\nimport java.math.BigDecimal;\r\nimport jakarta.persistence.EnumType;\r\nimport jakarta.persistence.Enumerated;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport ru.alex.msdeal.entity.constant.EmploymentPosition;\r\nimport ru.alex.msdeal.entity.constant.EmploymentStatus;\r\n\r\n\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\npublic class Employment {\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private EmploymentStatus employmentStatus;\r\n    private String employerInn;\r\n    private BigDecimal salary;\r\n    @Enumerated(EnumType.STRING)\r\n    private EmploymentPosition employmentsPosition;\r\n    private Integer workExperienceTotal;\r\n    private Integer workExperienceCurrent;\r\n\r\n}\r\n
===================================================================
diff --git a/ms-deal/src/main/java/ru/alex/msdeal/entity/Employment.java b/ms-deal/src/main/java/ru/alex/msdeal/entity/Employment.java
--- a/ms-deal/src/main/java/ru/alex/msdeal/entity/Employment.java	
+++ b/ms-deal/src/main/java/ru/alex/msdeal/entity/Employment.java	
@@ -1,8 +1,9 @@
 package ru.alex.msdeal.entity;
 
 import java.math.BigDecimal;
-import jakarta.persistence.EnumType;
-import jakarta.persistence.Enumerated;
+
+import javax.persistence.EnumType;
+import javax.persistence.Enumerated;
 import lombok.AllArgsConstructor;
 import lombok.Getter;
 import lombok.Setter;
